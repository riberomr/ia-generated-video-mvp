generator client {
  provider = "prisma-client-js"
  output   = "../../../node_modules/.prisma/client"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum ScriptStatus {
  DRAFT
  PUBLISHED
  ARCHIVED
}

model Course {
  id        String   @id @default(uuid())
  topic     String
  rawContent String  @db.Text
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  scripts   Script[]
}

model Script {
  id        String   @id @default(uuid())
  courseId  String
  course    Course   @relation(fields: [courseId], references: [id])
  scenes    Json     // Array of Scenes (Renamed from script for clarity vs Model name, or keep script? Let's use scenes)
  status    ScriptStatus @default(DRAFT)
  originalScenes Json
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  videos    RenderedVideo[]
}

model RenderedVideo {
  id          String   @id @default(uuid())
  scriptId    String
  script      Script   @relation(fields: [scriptId], references: [id])
  status      String   // 'PENDING', 'PROCESSING', 'COMPLETED', 'FAILED'
  externalId  String?  // HeyGen ID
  downloadUrl String?
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}
